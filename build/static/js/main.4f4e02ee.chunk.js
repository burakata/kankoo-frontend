(this["webpackJsonpkankoo-frontend"]=this["webpackJsonpkankoo-frontend"]||[]).push([[0],{100:function(e,t,n){},103:function(e,t,n){},110:function(e,t,n){"use strict";n.r(t);var a=n(30),c=n.n(a),r=n(22),s=n(27),i=n(65),d=(n(79),n(68)),o=n(4),l=n(124),u=n(13),j=n(3),m=n(0),b=n(67),O=n(125),v=n(20),f=n.n(v),h=n(25),p=n(57),I=n.n(p),g=function(){return I.a.create({baseURL:"https://kankoo-backend.herokuapp.com"})},x=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(n){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"GET_GAMES_START"}),t.prev=1,t.next=4,g().get("/fixture/"+e);case 4:a=t.sent,n({type:"GET_GAMES_SUCCESS",payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:"GET_GAMES_ERROR"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},N=(n(100),n(2));Object(b.a)(O.a)((function(e){var t=e.theme;return Object(j.a)(Object(j.a)({backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff"},t.typography.body2),{},{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})}));function A(e){var t=e.user,n=m.useState(""),a=Object(o.a)(n,2),c=(a[0],a[1],m.useState(!1)),s=Object(o.a)(c,2),i=s[0],d=s[1],l=m.useState(!1),b=Object(o.a)(l,2),O=b[0],v=b[1],p=m.useState([]),I=Object(o.a)(p,2),A=I[0],G=I[1],S=m.useState({Id:1,IsBetActive:!1}),E=Object(o.a)(S,2),_=E[0],y=E[1];console.log("loginuser1"),console.log(t);var T=m.useState([]),B=Object(o.a)(T,2),w=B[0],R=B[1],k=m.useState({Id:t.Id,Name:t.Name,UserName:t.UserName,Password:"",IsAdmin:t.IsAdmin}),U=Object(o.a)(k,2),C=U[0],M=U[1],D=Object(m.useState)([]),P=Object(o.a)(D,2),H=P[0],K=P[1],L=Object(r.b)(),W=Object(r.c)((function(e){return e.teams})).data,q=Object(r.c)((function(e){return e.games})).data;Object(m.useEffect)((function(){!W.length&&L(function(){var e=Object(h.a)(f.a.mark((function e(t){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_TEAMS_START"}),e.prev=1,e.next=4,g().get("/teams");case 4:n=e.sent,t({type:"GET_TEAMS_SUCCESS",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"GET_TEAMS_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(m.useEffect)((function(){_&&L(x(_.Id))}),[i,_.Id]),Object(m.useEffect)((function(){g().get("/weeks").then((function(e){G(e.data)}))}),[]),Object(m.useEffect)((function(){g().get("/users").then((function(e){R(e.data)}))}),[]),Object(m.useEffect)((function(){d(!0);var e=[],n=C.Id<0?t.Id:C.Id;console.log("betUserId"),console.log(n),console.log("games"),console.log(q),q.map((function(t){var a;return null===(a=t.GameBets.filter((function(e){return e.UserId===n})))||void 0===a?void 0:a.map((function(t){e.push({Bet:t.Bet,GameId:t.GameId,UserId:t.UserId})}))})),console.log("userBets1"),console.log(e),K(e),d(!1)}),[q,_.Id,C.Id]);var F=m.useState(-1),J=Object(o.a)(F,2),Y=(J[0],J[1],function(e,n){var a,c,r={Bet:parseInt(e.target.value),GameId:n,UserId:t.Id};K((a=H,c=r,[].concat(Object(u.a)(a.filter((function(e){return e.GameId!==c.GameId}))),[Object(j.a)({},c)])))});return Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"container-1",children:Object(N.jsx)("div",{className:"two alt-two",children:Object(N.jsxs)("h1",{children:["KANKOO LEAGUE",Object(N.jsxs)("span",{children:["Merhaba ",t.Name]})]})})}),t.IsAdmin&&Object(N.jsx)("div",{className:"container-1",children:Object(N.jsxs)("select",{className:"selectbox",onChange:function(e){return function(e){e.preventDefault();var t=e.target.value,n=w.find((function(e){return e.Id===parseInt(t)}));n&&M(n)}(e)},children:[Object(N.jsx)("option",{value:t.Id,children:"Kullanici"}),w.filter((function(e){return!e.IsAdmin})).map((function(e){return Object(N.jsx)("option",{value:e.Id,children:e.Name},e.Id)}))]})}),Object(N.jsx)("div",{className:"container-1",children:Object(N.jsx)("select",{className:"selectbox",onChange:function(e){return function(e){e.preventDefault();var t=e.target.value,n=A.find((function(e){return e.Id===parseInt(t)}));n&&y(n)}(e)},children:A.map((function(e){return Object(N.jsxs)("option",{value:e.Id,children:[e.Id,". Hafta"]},e.Id)}))})}),q.map((function(e){var t,n,a,c,r,s,d,o,l;return Object(N.jsxs)("div",{className:"container-1",children:[Object(N.jsx)("div",{className:"grid_div",children:Object(N.jsx)("p",{className:"teamName",children:e.HomeTeam.Name})}),Object(N.jsx)("div",{className:"grid_div",children:Object(N.jsx)("p",{className:"teamName",children:e.AwayTeam.Name})}),Object(N.jsx)("div",{className:"grid_div_betselect",children:Object(N.jsxs)("div",{className:"radiogroup",children:[Object(N.jsx)("input",{type:"radio",value:"1",name:e.GameId.toString()+"bet",checked:1===(null===(t=H.find((function(t){return t.GameId==e.GameId})))||void 0===t?void 0:t.Bet),disabled:i||!_.IsBetActive,className:_.IsBetActive||1!==e.Result||e.Result!==(null===(n=H.find((function(t){return t.GameId==e.GameId})))||void 0===n?void 0:n.Bet)?1===(null===(a=H.find((function(t){return t.GameId==e.GameId})))||void 0===a?void 0:a.Bet)?"looser":"":"winner",onChange:function(t){return Y(t,e.GameId)}})," 1 ",e.HomeWinPoint>0?"("+e.HomeWinPoint/100+")":"",Object(N.jsx)("input",{type:"radio",value:"0",name:e.GameId.toString()+"bet",checked:0===(null===(c=H.find((function(t){return t.GameId==e.GameId})))||void 0===c?void 0:c.Bet),disabled:i||!_.IsBetActive,className:_.IsBetActive||0!==e.Result||e.Result!==(null===(r=H.find((function(t){return t.GameId==e.GameId})))||void 0===r?void 0:r.Bet)?0===(null===(s=H.find((function(t){return t.GameId==e.GameId})))||void 0===s?void 0:s.Bet)?"looser":"":"winner",onChange:function(t){return Y(t,e.GameId)}})," 0 ",e.DrawPoint>0?"("+e.DrawPoint/100+")":"",Object(N.jsx)("input",{type:"radio",value:"2",name:e.GameId.toString()+"bet",checked:2===(null===(d=H.find((function(t){return t.GameId==e.GameId})))||void 0===d?void 0:d.Bet),disabled:i||!_.IsBetActive,className:_.IsBetActive||2!==e.Result||e.Result!==(null===(o=H.find((function(t){return t.GameId==e.GameId})))||void 0===o?void 0:o.Bet)?2===(null===(l=H.find((function(t){return t.GameId==e.GameId})))||void 0===l?void 0:l.Bet)?"looser":"":"winner",onChange:function(t){return Y(t,e.GameId)}})," 2 ",e.AwayWinPoint>0?"("+e.AwayWinPoint/100+")":""]})})]},e.GameId+"key")})),!t.IsAdmin&&O&&Object(N.jsx)("div",{className:"container-1",children:"Kaydedildi."}),!t.IsAdmin&&!_.IsBetActive&&Object(N.jsx)("div",{className:"container-1",children:"Bahisler kapalidir."}),!t.IsAdmin&&_.IsBetActive&&Object(N.jsxs)("div",{className:"container-1",children:[Object(N.jsx)("button",{onClick:function(e){e.preventDefault(),H&&H.length>0&&(d(!0),console.log("games1"),console.log(q),g().post("/add-bulk-bets",H).then((function(e){L(x(_.Id)),d(!1),v(!0)})))},disabled:i||!_.IsBetActive,children:H.length>0?"GUNCELLE":"OYNA"}),"."]}),Object(N.jsx)("br",{}),Object(N.jsx)("br",{}),!_.IsBetActive&&Object(N.jsxs)("div",{className:"container-1",children:[Object(N.jsx)("div",{className:"grid_div bothteams",children:Object(N.jsx)("p",{className:"gridHeader",children:Object(N.jsxs)("strong",{children:["TAHMINLER (",_.Id,".Hafta)"]})})}),w.filter((function(e){return!e.IsAdmin})).map((function(e){return Object(N.jsx)("div",{className:"grid_div userbets",children:Object(N.jsx)("p",{className:"teamName",children:e.Name})})}))]},"-1key"),!_.IsBetActive&&q.map((function(e){return Object(N.jsxs)("div",{className:"container-1",children:[Object(N.jsx)("div",{className:"grid_div bothteams",children:Object(N.jsxs)("p",{className:"teamName",children:[e.HomeTeam.Name," - ",e.AwayTeam.Name]})}),w.filter((function(e){return!e.IsAdmin})).map((function(t){var n;return null===(n=e.GameBets.filter((function(e){return e.UserId===t.Id})))||void 0===n?void 0:n.map((function(t){return Object(N.jsx)("div",{className:e.Result===t.Bet?"grid_div userbets winner":"grid_div userbets looser",children:Object(N.jsx)("p",{className:"teamName",children:t.Bet})})}))}))]},e.GameId+"key")}))]})}n(103);function G(e){var t=e.isSubmitted,n=e.setIsSubmitted,a=(e.user,e.setUser),c=Object(m.useState)({name:"",message:""}),r=Object(o.a)(c,2),s=r[0],i=r[1],d="invalid username",l="invalid password",u=function(e){return e===s.name&&Object(N.jsx)("div",{className:"error",children:s.message})},j=Object(N.jsx)("div",{className:"form",children:Object(N.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=document.forms[0],c=t.uname,r=t.pass;g().get("/users/"+c.value).then((function(e){console.log(e.data);var t=e.data;t?t.Password!==r.value?(i({name:"pass",message:l}),a({Id:-1,Name:"",Password:"",UserName:"",IsAdmin:!1})):(n(!0),a(t)):(i({name:"uname",message:d}),a({Id:-1,Name:"",Password:"",UserName:"",IsAdmin:!1}))})).catch((function(e){return console.error("Error"+e)}))},children:[Object(N.jsxs)("div",{className:"input-container",children:[Object(N.jsx)("label",{children:"Username "}),Object(N.jsx)("input",{type:"text",name:"uname",required:!0}),u("uname")]}),Object(N.jsxs)("div",{className:"input-container",children:[Object(N.jsx)("label",{children:"Password "}),Object(N.jsx)("input",{type:"password",name:"pass",required:!0}),u("pass")]}),Object(N.jsx)("div",{className:"button-container",children:Object(N.jsx)("input",{type:"submit"})})]})});return Object(N.jsx)("div",{className:"app",children:Object(N.jsxs)("div",{className:"login-form",children:[Object(N.jsx)("div",{className:"title",children:"Sign In"}),t?Object(N.jsx)("div",{children:"User is successfully logged in"}):j]})})}var S=l.a.Content,E=l.a.Footer;var _=function(){var e=Object(m.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(m.useState)({Id:-1,Name:"",Password:"",UserName:"",IsAdmin:!1}),r=Object(o.a)(c,2),s=r[0],i=r[1];return n||s&&!(s.Id<1)?Object(N.jsxs)(l.a,{children:[Object(N.jsx)(S,{className:"site-layout",style:{padding:"10px",marginTop:8},children:Object(N.jsx)(A,{user:s})}),Object(N.jsx)(E,{style:{textAlign:"center"},children:Object(N.jsx)("h3",{children:"KANKOO 2022"})})]}):Object(N.jsx)(G,{isSubmitted:n,setIsSubmitted:a,user:s,setUser:i})},y={data:[],loading:!1,error:""},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TEAMS_START":return Object(j.a)(Object(j.a)({},e),{},{loading:!0,error:""});case"GET_TEAMS_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,data:t.payload});case"GET_TEAMS_ERROR":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:"Error fetching teams"});default:return e}},B={data:[],loading:!1,error:""},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GAMES_START":return Object(j.a)(Object(j.a)({},e),{},{loading:!0,error:""});case"GET_GAMES_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,data:t.payload});case"GET_GAMES_ERROR":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:"Error fetching games"});case"ADD_GAME_START":return Object(j.a)(Object(j.a)({},e),{},{loading:!0,error:""});case"ADD_GAME_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,data:[t.payload].concat(Object(u.a)(e.data))});case"ADD_GAME_ERROR":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:"Error adding game"});default:return e}},R=Object(s.b)({teams:T,games:w}),k=Object(s.c)(R,Object(s.a)(i.a));c.a.render(Object(N.jsx)(r.a,{store:k,children:Object(N.jsx)(d.a,{children:Object(N.jsx)(_,{})})}),document.getElementById("root"))}},[[110,1,2]]]);