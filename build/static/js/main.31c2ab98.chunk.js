(this["webpackJsonpkankoo-frontend"]=this["webpackJsonpkankoo-frontend"]||[]).push([[0],{100:function(e,t,n){},103:function(e,t,n){},110:function(e,t,n){"use strict";n.r(t);var a=n(30),c=n.n(a),r=n(22),s=n(27),i=n(65),d=(n(79),n(68)),o=n(4),u=n(124),l=n(13),j=n(3),m=n(0),b=n(67),O=n(125),f=n(20),v=n.n(f),p=n(25),I=n(57),h=n.n(I),g=function(){return h.a.create({baseURL:"https://kankoo-backend.herokuapp.com"})},x=function(e){return function(){var t=Object(p.a)(v.a.mark((function t(n){var a;return v.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"GET_GAMES_START"}),t.prev=1,t.next=4,g().get("/fixture/"+e);case 4:a=t.sent,n({type:"GET_GAMES_SUCCESS",payload:a.data}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:"GET_GAMES_ERROR"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},G=(n(100),n(2));Object(b.a)(O.a)((function(e){var t=e.theme;return Object(j.a)(Object(j.a)({backgroundColor:"dark"===t.palette.mode?"#1A2027":"#fff"},t.typography.body2),{},{padding:t.spacing(1),textAlign:"center",color:t.palette.text.secondary})}));function A(e){var t=e.user,n=m.useState(""),a=Object(o.a)(n,2),c=(a[0],a[1],m.useState(!1)),s=Object(o.a)(c,2),i=s[0],d=s[1],u=m.useState(!1),b=Object(o.a)(u,2),O=b[0],f=b[1],I=m.useState([]),h=Object(o.a)(I,2),A=h[0],S=h[1],E=m.useState({Id:1,IsBetActive:!1}),N=Object(o.a)(E,2),y=N[0],_=N[1];console.log("loginuser1"),console.log(t);var T=m.useState([]),w=Object(o.a)(T,2),R=w[0],B=w[1],k=m.useState({Id:t.Id,Name:t.Name,UserName:t.UserName,Password:"",IsAdmin:t.IsAdmin}),U=Object(o.a)(k,2),C=U[0],M=U[1],D=Object(m.useState)([]),P=Object(o.a)(D,2),K=P[0],H=P[1],L=Object(r.b)(),W=Object(r.c)((function(e){return e.teams})).data,q=Object(r.c)((function(e){return e.games})).data;Object(m.useEffect)((function(){!W.length&&L(function(){var e=Object(p.a)(v.a.mark((function e(t){var n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"GET_TEAMS_START"}),e.prev=1,e.next=4,g().get("/teams");case 4:n=e.sent,t({type:"GET_TEAMS_SUCCESS",payload:n.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"GET_TEAMS_ERROR"});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(m.useEffect)((function(){y&&L(x(y.Id))}),[y.Id]),Object(m.useEffect)((function(){g().get("/weeks").then((function(e){S(e.data)}))}),[]),Object(m.useEffect)((function(){g().get("/users").then((function(e){B(e.data)}))}),[]),Object(m.useEffect)((function(){d(!0);var e=[],n=C.Id<0?t.Id:C.Id;console.log("betUserId"),console.log(n),console.log("games"),console.log(q),q.map((function(t){var a;return null===(a=t.GameBets.filter((function(e){return e.UserId===n})))||void 0===a?void 0:a.map((function(t){e.push({Bet:t.Bet,GameId:t.GameId,UserId:t.UserId})}))})),console.log("userBets1"),console.log(e),H(e),d(!1)}),[q,y.Id,C.Id]);var F=m.useState(-1),J=Object(o.a)(F,2),Y=(J[0],J[1],function(e,n){var a,c,r={Bet:parseInt(e.target.value),GameId:n,UserId:t.Id};H((a=K,c=r,[].concat(Object(l.a)(a.filter((function(e){return e.GameId!==c.GameId}))),[Object(j.a)({},c)])))});return Object(G.jsxs)(G.Fragment,{children:[Object(G.jsx)("div",{className:"container-1",children:Object(G.jsx)("div",{className:"two alt-two",children:Object(G.jsxs)("h1",{children:["KANKOO LEAGUE",Object(G.jsxs)("span",{children:["Merhaba ",t.Name]})]})})}),t.IsAdmin&&Object(G.jsx)("div",{className:"container-1",children:Object(G.jsxs)("select",{className:"selectbox",onChange:function(e){return function(e){e.preventDefault();var t=e.target.value,n=R.find((function(e){return e.Id===parseInt(t)}));n&&M(n)}(e)},children:[Object(G.jsx)("option",{value:t.Id,children:"Kullanici"}),R.filter((function(e){return!e.IsAdmin})).map((function(e){return Object(G.jsx)("option",{value:e.Id,children:e.Name},e.Id)}))]})}),Object(G.jsx)("div",{className:"container-1",children:Object(G.jsx)("select",{className:"selectbox",onChange:function(e){return function(e){e.preventDefault();var t=e.target.value,n=A.find((function(e){return e.Id===parseInt(t)}));n&&_(n)}(e)},children:A.map((function(e){return Object(G.jsxs)("option",{value:e.Id,children:[e.Id,". Hafta"]},e.Id)}))})}),q.map((function(e){var t,n,a,c,r,s,d,o,u;return Object(G.jsxs)("div",{className:"container-1",children:[Object(G.jsx)("div",{className:"grid_div",children:Object(G.jsx)("p",{className:"teamName",children:e.HomeTeam.Name})}),Object(G.jsx)("div",{className:"grid_div",children:Object(G.jsx)("p",{className:"teamName",children:e.AwayTeam.Name})}),Object(G.jsx)("div",{className:"grid_div_betselect",children:Object(G.jsxs)("div",{className:"radiogroup",children:[Object(G.jsx)("input",{type:"radio",value:"1",name:e.GameId.toString()+"bet",checked:1===(null===(t=K.find((function(t){return t.GameId==e.GameId})))||void 0===t?void 0:t.Bet),disabled:i||!y.IsBetActive,className:y.IsBetActive||1!==e.Result||e.Result!==(null===(n=K.find((function(t){return t.GameId==e.GameId})))||void 0===n?void 0:n.Bet)?1===(null===(a=K.find((function(t){return t.GameId==e.GameId})))||void 0===a?void 0:a.Bet)?"looser":"":"winner",onChange:function(t){return Y(t,e.GameId)}})," 1 ",e.HomeWinPoint>0?"("+e.HomeWinPoint/100+")":"",Object(G.jsx)("input",{type:"radio",value:"0",name:e.GameId.toString()+"bet",checked:0===(null===(c=K.find((function(t){return t.GameId==e.GameId})))||void 0===c?void 0:c.Bet),disabled:i||!y.IsBetActive,className:y.IsBetActive||0!==e.Result||e.Result!==(null===(r=K.find((function(t){return t.GameId==e.GameId})))||void 0===r?void 0:r.Bet)?0===(null===(s=K.find((function(t){return t.GameId==e.GameId})))||void 0===s?void 0:s.Bet)?"looser":"":"winner",onChange:function(t){return Y(t,e.GameId)}})," 0 ",e.DrawPoint>0?"("+e.DrawPoint/100+")":"",Object(G.jsx)("input",{type:"radio",value:"2",name:e.GameId.toString()+"bet",checked:2===(null===(d=K.find((function(t){return t.GameId==e.GameId})))||void 0===d?void 0:d.Bet),disabled:i||!y.IsBetActive,className:y.IsBetActive||2!==e.Result||e.Result!==(null===(o=K.find((function(t){return t.GameId==e.GameId})))||void 0===o?void 0:o.Bet)?2===(null===(u=K.find((function(t){return t.GameId==e.GameId})))||void 0===u?void 0:u.Bet)?"looser":"":"winner",onChange:function(t){return Y(t,e.GameId)}})," 2 ",e.AwayWinPoint>0?"("+e.AwayWinPoint/100+")":""]})})]},e.GameId+"key")})),!t.IsAdmin&&O&&Object(G.jsx)("div",{className:"container-1",children:"Kaydedildi."}),!t.IsAdmin&&!y.IsBetActive&&Object(G.jsx)("div",{className:"container-1",children:"Bahisler kapalidir."}),!t.IsAdmin&&y.IsBetActive&&Object(G.jsxs)("div",{className:"container-1",children:[Object(G.jsx)("button",{onClick:function(e){e.preventDefault(),K&&K.length>0&&(d(!0),console.log("games1"),console.log(q),g().post("/add-bulk-bets",K).then((function(){L(x(y.Id)),d(!1),f(!0)})))},disabled:i||!y.IsBetActive,children:K.length>0?"GUNCELLE":"OYNA"}),"."]})]})}n(103);function S(e){var t=e.isSubmitted,n=e.setIsSubmitted,a=(e.user,e.setUser),c=Object(m.useState)({name:"",message:""}),r=Object(o.a)(c,2),s=r[0],i=r[1],d="invalid username",u="invalid password",l=function(e){return e===s.name&&Object(G.jsx)("div",{className:"error",children:s.message})},j=Object(G.jsx)("div",{className:"form",children:Object(G.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t=document.forms[0],c=t.uname,r=t.pass;g().get("/users/"+c.value).then((function(e){console.log(e.data);var t=e.data;t?t.Password!==r.value?(i({name:"pass",message:u}),a({Id:-1,Name:"",Password:"",UserName:"",IsAdmin:!1})):(n(!0),a(t)):(i({name:"uname",message:d}),a({Id:-1,Name:"",Password:"",UserName:"",IsAdmin:!1}))})).catch((function(e){return console.error("Error"+e)}))},children:[Object(G.jsxs)("div",{className:"input-container",children:[Object(G.jsx)("label",{children:"Username "}),Object(G.jsx)("input",{type:"text",name:"uname",required:!0}),l("uname")]}),Object(G.jsxs)("div",{className:"input-container",children:[Object(G.jsx)("label",{children:"Password "}),Object(G.jsx)("input",{type:"password",name:"pass",required:!0}),l("pass")]}),Object(G.jsx)("div",{className:"button-container",children:Object(G.jsx)("input",{type:"submit"})})]})});return Object(G.jsx)("div",{className:"app",children:Object(G.jsxs)("div",{className:"login-form",children:[Object(G.jsx)("div",{className:"title",children:"Sign In"}),t?Object(G.jsx)("div",{children:"User is successfully logged in"}):j]})})}var E=u.a.Content,N=u.a.Footer;var y=function(){var e=Object(m.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1],c=Object(m.useState)({Id:-1,Name:"",Password:"",UserName:"",IsAdmin:!1}),r=Object(o.a)(c,2),s=r[0],i=r[1];return n||s&&!(s.Id<1)?Object(G.jsxs)(u.a,{children:[Object(G.jsx)(E,{className:"site-layout",style:{padding:"10px",marginTop:8},children:Object(G.jsx)(A,{user:s})}),Object(G.jsx)(N,{style:{textAlign:"center"},children:Object(G.jsx)("h3",{children:"KANKOO 2022"})})]}):Object(G.jsx)(S,{isSubmitted:n,setIsSubmitted:a,user:s,setUser:i})},_={data:[],loading:!1,error:""},T=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_TEAMS_START":return Object(j.a)(Object(j.a)({},e),{},{loading:!0,error:""});case"GET_TEAMS_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,data:t.payload});case"GET_TEAMS_ERROR":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:"Error fetching teams"});default:return e}},w={data:[],loading:!1,error:""},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_GAMES_START":return Object(j.a)(Object(j.a)({},e),{},{loading:!0,error:""});case"GET_GAMES_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,data:t.payload});case"GET_GAMES_ERROR":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:"Error fetching games"});case"ADD_GAME_START":return Object(j.a)(Object(j.a)({},e),{},{loading:!0,error:""});case"ADD_GAME_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,data:[t.payload].concat(Object(l.a)(e.data))});case"ADD_GAME_ERROR":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:"Error adding game"});default:return e}},B=Object(s.b)({teams:T,games:R}),k=Object(s.c)(B,Object(s.a)(i.a));c.a.render(Object(G.jsx)(r.a,{store:k,children:Object(G.jsx)(d.a,{children:Object(G.jsx)(y,{})})}),document.getElementById("root"))}},[[110,1,2]]]);
//# sourceMappingURL=main.31c2ab98.chunk.js.map